"use strict";(self.webpackChunkmodular_creator_app=self.webpackChunkmodular_creator_app||[]).push([[786],{786:function(e,t,n){n.r(t),n.d(t,{closeDrawer:function(){return p},createModularApp:function(){return k},driveWithDarkMode:function(){return h},initModularEngine:function(){return m},isDrawerOpen:function(){return y},openDrawer:function(){return d}});var r=n(159),o=n(814),i=n(313),a=n(352),l=n(572),c=n(529),u=n(197),s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},s(e,t)};var f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},f.apply(this,arguments)},d=(0,o.do)("@@ui/OPEN_DRAWER"),p=(0,o.do)("@@ui/CLOSE_DRAWER"),m=function(e){var t,o=e||{},i=o.redux||{customize:{}},a=i.customize||{},l={ui:{state:{isDrawerOpen:!1},effects:(t={},t[p.type]=function(e,t){return f(f({},e),{isDrawerOpen:!1})},t[d.type]=function(e,t){return f(f({},e),{isDrawerOpen:!0})},t)}};return Object.keys(l).forEach((function(e){if(a[e]){var t=a[e].state||{},n=a[e].effects||{};a[e].state=f(f({},t),l[e].state),a[e].effects=f(f({},n),l[e].effects)}else a[e]=l[e]})),i.customize=a,o.redux=i,Promise.resolve().then(n.bind(n,572)).then((function(e){var t=e.modalPlugin,n=e.uiPlugin,i=e.localizationPlugin,a=e.themerPlugin,l=e.routerPlugin,c=e.urlCheckerPlugin,u=e.epicsPlugin,s=o.plugins||[];s=s.concat([t,n,i,a,l,c,u]),o.plugins=s;var f=(0,r.Kv)({config:o});return{store:f.store,config:f.config}}))},h=function(e){return function(t){var n=(0,a.v9)(l.isInDarkMode);return e(f(f({},t),{dark:n}))}},v=function(e){var t=e.modals;e.namespace;var n=e.store,r=(0,a.v9)(l.getModalType),o=(0,a.v9)(l.isModalVisible),u=r&&t[r]?t[r]:function(){return i.createElement("div",null)},s=h(c.u_);return i.createElement(s,{onClose:function(){return n.dispatch((0,l.closeModal)())},hide:!o},i.createElement(u,null))},E=function(e){var t=e.history,n=e.renderCallback,r=(0,a.v9)(l.getRoutes),o=(0,a.v9)(l.getHomePage);return i.createElement(c.W2,{unstyled:!0,style:{position:"relative",width:"100%",overflow:"auto",height:"100%"}},i.createElement(u.F0,{history:t},i.createElement(u.rs,null,Object.keys(r).map((function(e){return i.createElement(u.AW,{component:n(e),key:e,exact:!0,path:r[e]})})),i.createElement(u.l_,{to:o}))))},g=function(e){function t(t){var n=e.call(this,t)||this;return n.state={hasError:!1},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.getDerivedStateFromError=function(e){return{hasError:!0}},t.prototype.componentDidCatch=function(e,t){this.setState({hasError:!0})},t.prototype.render=function(){return this.state.hasError?(window.document.title="Error",this.props.fallback||i.createElement("div",{style:{width:"100vw",height:"100vh",display:"flex",flexDirection:"column"}},i.createElement("div",{style:{margin:"auto"}},i.createElement(c.zx,{style:{fontSize:"3rem",padding:"1rem"},className:"error-button",onClick:function(){window.location.reload()}},"Try again")))):this.props.children},t}(i.Component),y=(0,o.to)(l.getUIView,(function(e){return e.isDrawerOpen})),w=function(e){var t=e.children,n=e.position,r=(0,a.I0)(),o=(0,a.v9)(y);i.useEffect((function(){if(o){var e=document.getElementById("modular-drawer"),t=document.getElementById("app-container");t&&(t.onclick=function(t){e&&!e.contains(t.target)&&r(p())})}return function(){var e=document.getElementById("app-container");e&&(e.onclick=null)}}),[r,o]);var l=h(c.dy);return i.createElement(l,{hide:!o,onClose:function(){r(p())},position:n},t)},k=function(e){var t=e.creatorConfig,n=e.engineConfig,r=e.store;return function(){return function(e){var t=e.store,n=e.config,r=e.engineConfig;if(t&&n&&r){var o=n.content,l=n.header,u=n.footer,s=n.drawer&&n.drawer.content,d=n.preloader,p=n.drawer?{children:n.drawer.content,position:n.drawer.position}:{},m=h(c.W2);return i.createElement(i.Suspense,{fallback:d?i.createElement(d,null):i.createElement("div",null)},i.createElement(a.zt,{store:t},i.createElement(g,{fallback:n.error},n.modals&&i.createElement(v,{store:t,namespace:n.modalNamepsace,modals:n.modals}),s&&i.createElement(w,f({},p),s&&i.createElement(s,null)),i.createElement("div",{id:"app-container",style:{height:"100vh",width:"100vw",display:"flex",flexDirection:"column",alignItems:"center",overflow:"hidden"}},l&&i.createElement("header",{style:{position:"relative",top:"0",right:"0",left:"0",width:"100%"}},i.createElement(m,null,i.createElement(l,null))),i.createElement(E,{renderCallback:n.pagesRendering||function(e){return function(){return i.createElement("div",null)}},history:r.history}),o&&i.createElement(o,null),u&&i.createElement("footer",{style:{width:"100%",position:"relative",bottom:0,left:"0",right:"0"}},i.createElement(m,null,i.createElement(u,null)))))))}return i.createElement("div",null)}({engineConfig:n,config:t,store:r})}}}}]);